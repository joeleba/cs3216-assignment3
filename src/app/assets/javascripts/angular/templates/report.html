<div class="content">
  <div class="report-wrapper">
    <div class="report-text">Finally! The bus</div>
    <div class="btn-group btn-inline-group report-selector bus-types" role="group" aria-label="bus-type-group">
      <button type="button" id="bus-{{service.id}}" class="btn btn-default btn-inline bus-type" ng-repeat="service in serviceData" ng-class="{active : $first}" onclick="selectBusType(this)">{{service.name}}</button>
    </div>
    <div class="report-text">just arrived and it's</div>
    <div class="btn-group btn-inline-group report-selector fullness-levels" role="group" aria-label="fullness-level-group">
      <button type="button" class="btn btn-inline fullness-level" ng-repeat="fullnessLevel in fullnessLevels" ng-class="{active : $first}" onclick="selectFullnessLevel(this)">{{fullnessLevel}}</button>
    </div>
    <form name="reportForm" ng-submit="submitReport()" novalidate>
      <input id="busType" name="busType" type="hidden" value=""/>
      <input id="fullnessLevel" name="fullnessLevel" type="hidden"/>
      <button id="report-submit" class="btn btn-fill btn-primary report-submit" type="submit">Contribute!</button>
    </form>
    <div class="alert-block">
    </div>
  </div>
</div>
<script>
  function selectBusType(o) {
    if (o === undefined) {
      setTimeout(function() {
        o = $(".bus-type").first()[0];
        selectBusType(o);
      }, 100);
    } else {
      $("#busType").val($(o).attr('id').split('-')[1]);
      $(".bus-type").removeClass("active");
      $(o).addClass("active");
    }
  }
  function selectFullnessLevel(o) {
    if (o === undefined) {
      setTimeout(function() {
        o = $(".fullness-level").first()[0];
        selectFullnessLevel(o);
      }, 100);
    } else {
      $("#fullnessLevel").val(o.innerHTML.trim());
      $(".fullness-level").removeClass("active");
      $(o).addClass("active");
    }
  }
</script>
